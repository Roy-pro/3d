<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Use correct character set. -->
    <meta charset="utf-8" />
    <!-- Tell IE to use the latest, best version. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />

    <script src="http://localhost:8080/3d/libs/Cesium-1.109/Build/Cesium/Cesium.js"></script>
    <script src="http://localhost:8080/3d/libs/Cesium-1.109/Apps/Sandcastle/Sandcastle-header.js"></script>

    <title>Map 1</title>
</head>
<style>
    @import url(http://localhost:8080/3d/libs/Cesium-1.109/Apps/Sandcastle/CesiumSandcastle.css);

    @import url(http://localhost:8080/3d/libs/Cesium-1.109/Apps/Sandcastle/templates/bucket.css);
    .back {
  position: absolute;
  margin: 50px;
  margin-right: -190px;
  width: 25%;
  top: 0;
  right: 0;
  padding: 5 px;
  color:#fff;
}

      a{
        color:#000000;
        text-shadow: 0 0 3px #FFF, 0 0 5px #0000FF;
      }
</style>

<body>
    <div id="cesiumContainer" class="fullSize"></div>
    <div id="loadingOverlay">
        <h1>Loading...</h1>
    </div>
    <div id="toolbar"></div>

    <div class="back">
        <a href="index.html"><h3>Go back to Landing Page -></h3></a>
      </div>
   	<script type="text/javascript">
	
 var viewer = new Cesium.Viewer("cesiumContainer",{
                  Geocoder: false,
                  Animation: true,
                  CreditsDisplay: false,
                  Timeline: false,
                  FullscreenButton: false
 });
var imageryLayers = viewer.imageryLayers;
imageryLayers.addImageryProvider(
  new Cesium.WebMapServiceImageryProvider({
    url:"http://localhost:8082/geoserver/wms",
    layers: "ne:countries",
    parameters: {
      transparent: true,
      format: "image/png",
    },
  })
);

imageryLayers.addImageryProvider(
  new Cesium.WebMapServiceImageryProvider({
    url:"http://localhost:8082/geoserver/wms",
    layers: "topp:states",
    parameters: {
      transparent: true,
      format: "image/png",
    },
  })
);

viewer.camera.setView({
    destination: Cesium.Rectangle.fromDegrees(
        -125.77,
        49.83,
        -62.00,
        23.00
    ),
});

Sandcastle.addToolbarMenu(
    [{
            text: "Select Layer",
            onselect: function() {
                
            }
        },
        {
            text: "Countries",
            onselect: function() {
                viewer.dataSources.add(
                    Cesium.GeoJsonDataSource.load(
                        "countries.geojson"
                    )
                );
            }
        },
        {
            text: "Populated Places",
            onselect: function() {
                viewer.dataSources.add(
                    Cesium.GeoJsonDataSource.load(
                        "countries.geojson"
                    )
                );
                viewer.dataSources.add(
                    Cesium.GeoJsonDataSource.load(
                        "populatedplaces.geojson"
                    )
                );
            }
        },
        {
            text: "USA Population-Simple Style",
            onselect: function() {

                viewer.dataSources.add(
                    Cesium.GeoJsonDataSource.load(
                        "usa.geojson"
                    )
                );
                /* viewer.camera.lookAt(
   Cesium.Cartesian3.fromDegrees(-98.0, 40.0),
    new Cesium.Cartesian3(0.0, -4790000.0, 3930000.0)
  );*/
                var rectangle = Cesium.Rectangle.fromDegrees(-126.6, 21.76, -65.44, 52.64);

                viewer.camera.flyTo({
                    destination: Cesium.Cartesian3.fromDegrees(-97.98, 18.55, 4300000),
                    orientation: {
                        heading: Cesium.Math.toRadians(0),
                        pitch: Cesium.Math.toRadians(-65.0),
                        roll: 0.0,
                    },
                });

            },
        },

        {
            text: "USA Population- Extrude",
            onselect: function() {
                Cesium.Math.setRandomNumberSeed(0);
                var usa = Cesium.GeoJsonDataSource.load(
                    "usa.geojson"
                );
                usa
                    .then(function(dataSource) {
                        viewer.dataSources.add(dataSource);

                        //Get the array of entities
                        var entities = dataSource.entities.values;

                        var colorHash = {};
                        for (var i = 0; i < entities.length; i++) {
                            //For each entity, create a random color based on the state name.
                            //Some states have multiple entities, so we store the color in a
                            //hash so that we use the same color for the entire state.
                            var entity = entities[i];
                            var name = entity.name;
                            var color = colorHash[name];
                            if (!color) {
                                color = Cesium.Color.fromRandom({
                                    alpha: 1.0,
                                });
                                colorHash[name] = color;
                            }

                            //Set the polygon material to our random color.
                            entity.polygon.material = color;
                            //Remove the outlines.
                            entity.polygon.outline = false;

                            //Extrude the polygon based on the state's population.  Each entity
                            //stores the properties for the GeoJSON feature it was created from
                            //Since the population is a huge number, we divide by 50.
                            entity.polygon.extrudedHeight =
                                entity.properties.PERSONS / 50.0;
                        }
                    })
                    .otherwise(function(error) {
                        //Display any errrors encountered while loading.
                        window.alert(error);
                    });

                var rectangle = Cesium.Rectangle.fromDegrees(-126.6, 21.76, -65.44, 52.64);

                viewer.camera.flyTo({
                    destination: Cesium.Cartesian3.fromDegrees(-97.98, 18.55, 4300000),
                    orientation: {
                        heading: Cesium.Math.toRadians(0),
                        pitch: Cesium.Math.toRadians(-65.0),
                        roll: 0.0,
                    },
					easingFunction: Cesium.EasingFunction.QUADRATIC_IN_OUT,
                    duration: 5
                });


            }
        },

        {
            text: "Remove All",
            onselect: function() {
                viewer.dataSources.removeAll();
                viewer.clock.clockRange = Cesium.ClockRange.UNBOUNDED;
                viewer.clock.clockStep = Cesium.ClockStep.SYSTEM_CLOCK;
            }
        }


    ],
    "toolbar"
);

Sandcastle.reset = function() {
    viewer.dataSources.removeAll();
    viewer.clock.clockRange = Cesium.ClockRange.UNBOUNDED;
    viewer.clock.clockStep = Cesium.ClockStep.SYSTEM_CLOCK;
};



	</script>
  </body>
</html>
